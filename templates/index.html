<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>늘봄 - AI 정서 지원 및 복지 정보 매칭 플랫폼</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <div class="container">
            <h1 class="logo">늘봄</h1>
            <nav class="nav">
                <button class="nav-btn" onclick="showSection('chat')">챗봇</button>
                <button class="nav-btn" onclick="showSection('welfare')">복지 정보</button>
                <button class="nav-btn" onclick="showSection('community')" id="community-btn" style="display:none;">커뮤니티</button>
                <div class="auth-buttons" id="auth-buttons">
                    <button class="btn btn-outline" onclick="showLoginModal()">로그인</button>
                    <button class="btn btn-primary" onclick="showSignupModal()">회원가입</button>
                </div>
                <div class="user-info" id="user-info" style="display:none;">
                    <span id="user-email"></span>
                    <button class="btn btn-outline" onclick="logout()">로그아웃</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- 메인 컨텐츠 -->
    <main class="main">
        <div class="container">
            <!-- 챗봇 섹션 -->
            <section id="chat-section" class="section active">
                <h2>AI 챗봇 상담</h2>
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="message bot-message">
                            <div class="message-content">
                                안녕하세요! 늘봄 챗봇입니다. 무엇을 도와드릴까요?
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <input type="text" id="chat-input" class="chat-input" placeholder="메시지를 입력하세요..." onkeypress="handleChatKeyPress(event)">
                        <button class="btn btn-primary" onclick="sendChatMessage()">전송</button>
                    </div>
                    <div id="crisis-alert" class="crisis-alert" style="display:none;"></div>
                </div>
            </section>

            <!-- 복지 정보 섹션 -->
            <section id="welfare-section" class="section">
                <h2>복지 정보 검색</h2>
                <div class="search-container">
                    <div class="search-form">
                        <input type="text" id="welfare-keyword" class="search-input" placeholder="키워드 (예: 장학금, 주거비)">
                        <input type="text" id="welfare-region" class="search-input" placeholder="지역 (예: 서울)">
                        <input type="number" id="welfare-age" class="search-input" placeholder="나이 (선택사항)">
                        <button class="btn btn-primary" onclick="searchWelfare()">검색</button>
                    </div>
                    <div id="welfare-results" class="welfare-results"></div>
                </div>
            </section>

            <!-- 커뮤니티 섹션 -->
            <section id="community-section" class="section">
                <h2>커뮤니티</h2>
                <div id="community-content">
                    <div class="community-actions">
                        <button class="btn btn-primary" onclick="showVerificationModal()" id="verify-btn" style="display:none;">커뮤니티 가입 심사</button>
                        <button class="btn btn-primary" onclick="showPostModal()" id="post-btn" style="display:none;">게시글 작성</button>
                    </div>
                    <div id="community-posts" class="community-posts"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- 로그인 모달 -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('login-modal')">&times;</span>
            <h2>로그인</h2>
            <form id="login-form" onsubmit="handleLogin(event)">
                <input type="email" id="login-email" placeholder="이메일" required>
                <input type="password" id="login-password" placeholder="비밀번호" required>
                <button type="submit" class="btn btn-primary">로그인</button>
            </form>
            <div id="login-error" class="error-message"></div>
        </div>
    </div>

    <!-- 회원가입 모달 -->
    <div id="signup-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('signup-modal')">&times;</span>
            <h2>회원가입</h2>
            <form id="signup-form" onsubmit="handleSignup(event)">
                <input type="email" id="signup-email" placeholder="이메일" required>
                <input type="password" id="signup-password" placeholder="비밀번호 (8자 이상, 특수문자 포함)" required>
                <input type="password" id="signup-password-confirm" placeholder="비밀번호 확인" required>
                <input type="number" id="signup-age" placeholder="나이" min="1" max="150">
                <input type="text" id="signup-region" placeholder="지역 (예: 서울)">
                <button type="submit" class="btn btn-primary">회원가입</button>
            </form>
            <div id="signup-error" class="error-message"></div>
        </div>
    </div>

    <!-- 커뮤니티 심사 모달 -->
    <div id="verification-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('verification-modal')">&times;</span>
            <h2>커뮤니티 가입 심사</h2>
            <form id="verification-form" onsubmit="handleVerification(event)">
                <textarea id="verification-content" placeholder="가입 심사 내용을 작성해주세요..." rows="10" required></textarea>
                <button type="submit" class="btn btn-primary">제출</button>
            </form>
            <div id="verification-error" class="error-message"></div>
        </div>
    </div>

    <!-- 게시글 작성 모달 -->
    <div id="post-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('post-modal')">&times;</span>
            <h2>게시글 작성</h2>
            <form id="post-form" onsubmit="handlePostCreate(event)">
                <input type="text" id="post-title" placeholder="제목" required>
                <textarea id="post-content" placeholder="내용" rows="10" required></textarea>
                <button type="submit" class="btn btn-primary">작성</button>
            </form>
            <div id="post-error" class="error-message"></div>
        </div>
    </div>

    <script src="/static/js/api.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>

